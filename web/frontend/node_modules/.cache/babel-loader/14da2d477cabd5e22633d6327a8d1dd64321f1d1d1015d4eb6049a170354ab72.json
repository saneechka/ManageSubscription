{"ast":null,"code":"import React,{useState}from'react';import{Container,Form,Button,Alert,Card}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=_ref=>{let{user,setUser}=_ref;const[formData,setFormData]=useState({first_name:(user===null||user===void 0?void 0:user.first_name)||'',last_name:(user===null||user===void 0?void 0:user.last_name)||''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');setSuccess('');try{const token=localStorage.getItem('token');const response=await fetch('/api/profile',{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();if(!response.ok){throw new Error(data.error||'Failed to update profile');}// Update the user state with the new information\nsetUser({...user,...formData});setSuccess('Profile updated successfully');}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Container,{className:\"py-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"My Profile\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user===null||user===void 0?void 0:user.email]})}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formFirstName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"first_name\",value:formData.first_name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formLastName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"last_name\",value:formData.last_name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:loading,children:loading?'Saving...':'Save Changes'})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Payment Methods\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No payment methods on file.\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",children:\"Add Payment Method\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Account Settings\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",children:\"Change Password\"})]})})]});};export default Profile;","map":{"version":3,"names":["React","useState","Container","Form","Button","Alert","Card","jsx","_jsx","jsxs","_jsxs","Profile","_ref","user","setUser","formData","setFormData","first_name","last_name","loading","setLoading","error","setError","success","setSuccess","handleChange","e","target","name","value","handleSubmit","preventDefault","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","err","message","className","children","Body","variant","email","onSubmit","Group","controlId","Label","Control","type","onChange","required","disabled"],"sources":["/Users/saneechka/ManageSubscription/web/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Form, Button, Alert, Card } from 'react-bootstrap';\n\nconst Profile = ({ user, setUser }) => {\n  const [formData, setFormData] = useState({\n    first_name: user?.first_name || '',\n    last_name: user?.last_name || ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('/api/profile', {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to update profile');\n      }\n\n      // Update the user state with the new information\n      setUser({\n        ...user,\n        ...formData\n      });\n      \n      setSuccess('Profile updated successfully');\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container className=\"py-5\">\n      <h1 className=\"mb-4\">My Profile</h1>\n      \n      <Card>\n        <Card.Body>\n          {error && <Alert variant=\"danger\">{error}</Alert>}\n          {success && <Alert variant=\"success\">{success}</Alert>}\n\n          <div className=\"mb-4\">\n            <p><strong>Email:</strong> {user?.email}</p>\n          </div>\n          \n          <h4 className=\"mb-3\">Edit Profile</h4>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group className=\"mb-3\" controlId=\"formFirstName\">\n              <Form.Label>First Name</Form.Label>\n              <Form.Control \n                type=\"text\" \n                name=\"first_name\"\n                value={formData.first_name}\n                onChange={handleChange}\n                required\n              />\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\" controlId=\"formLastName\">\n              <Form.Label>Last Name</Form.Label>\n              <Form.Control \n                type=\"text\" \n                name=\"last_name\"\n                value={formData.last_name}\n                onChange={handleChange}\n                required\n              />\n            </Form.Group>\n\n            <Button \n              variant=\"primary\" \n              type=\"submit\" \n              disabled={loading}\n            >\n              {loading ? 'Saving...' : 'Save Changes'}\n            </Button>\n          </Form>\n          \n          <hr className=\"my-4\" />\n          \n          <h4 className=\"mb-3\">Payment Methods</h4>\n          <p>No payment methods on file.</p>\n          <Button variant=\"outline-primary\">Add Payment Method</Button>\n          \n          <hr className=\"my-4\" />\n          \n          <h4 className=\"mb-3\">Account Settings</h4>\n          <Button variant=\"outline-danger\">Change Password</Button>\n        </Card.Body>\n      </Card>\n    </Container>\n  );\n};\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}