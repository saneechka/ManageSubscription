{"ast":null,"code":"import React,{useState}from'react';import{Container,Form,Button,Alert}from'react-bootstrap';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLogin}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Ошибка входа');}// Сохраняем токен в localStorage\nlocalStorage.setItem('token',data.token);// Обновляем статус авторизации\nonLogin();// Перенаправляем в личный кабинет\nnavigate('/dashboard');}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{className:\"content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"\\u0412\\u0445\\u043E\\u0434 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u042D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100 mt-3\",disabled:loading,children:loading?'Вход...':'Войти'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0415\\u0449\\u0451 \\u043D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C\"})]})})]})});};export default Login;","map":{"version":3,"names":["React","useState","Container","Form","Button","Alert","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","email","setEmail","password","setPassword","loading","setLoading","error","setError","navigate","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","localStorage","setItem","token","err","message","className","children","variant","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","required","disabled","to"],"sources":["/Users/saneechka/ManageSubscription/web/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst Login = ({ onLogin }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Ошибка входа');\n      }\n\n      // Сохраняем токен в localStorage\n      localStorage.setItem('token', data.token);\n      \n      // Обновляем статус авторизации\n      onLogin();\n      \n      // Перенаправляем в личный кабинет\n      navigate('/dashboard');\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container className=\"content\">\n      <div className=\"auth-form\">\n        <h2 className=\"text-center mb-4\">Вход в систему</h2>\n        \n        {error && <Alert variant=\"danger\">{error}</Alert>}\n        \n        <Form onSubmit={handleSubmit}>\n          <Form.Group className=\"mb-3\" controlId=\"formEmail\">\n            <Form.Label>Электронная почта</Form.Label>\n            <Form.Control \n              type=\"email\" \n              placeholder=\"Введите email\" \n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </Form.Group>\n\n          <Form.Group className=\"mb-3\" controlId=\"formPassword\">\n            <Form.Label>Пароль</Form.Label>\n            <Form.Control \n              type=\"password\" \n              placeholder=\"Пароль\" \n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </Form.Group>\n\n          <Button \n            variant=\"primary\" \n            type=\"submit\" \n            className=\"w-100 mt-3\"\n            disabled={loading}\n          >\n            {loading ? 'Вход...' : 'Войти'}\n          </Button>\n        </Form>\n        \n        <div className=\"text-center mt-3\">\n          <p>Ещё нет аккаунта? <Link to=\"/register\">Зарегистрируйтесь</Link></p>\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}